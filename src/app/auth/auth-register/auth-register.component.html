<form [formGroup]="registerForm" (ngSubmit)="onRegister()">
  <mat-progress-bar mode="indeterminate" *ngIf="inProgress"></mat-progress-bar>
  <mat-card [ngClass]="{'mat-elevation-z0': layout.isHandset}">
    <mat-card-content>
      <mat-card-title>Create account</mat-card-title>
    </mat-card-content>
    <mat-form-field class="full-width">
      <input matInput placeholder="Full name" formControlName="fullname">
      <mat-error>Name is <strong>required</strong></mat-error>
    </mat-form-field>
    <div formGroupName="phones">
      <mat-form-field class="full-width">
        <input matInput placeholder="Phone number" formControlName="phoneNumber">
        <mat-error *ngIf="phoneControl.hasError('required')">Phone number is <strong>required</strong></mat-error>
        <mat-error *ngIf="phoneControl.hasError('restful')">{{phoneControl.getError('restful')}}
        </mat-error>
      </mat-form-field>
    </div>
    <div formGroupName="emails">
      <mat-form-field class="full-width">
        <input matInput placeholder="Email address" formControlName="email">
        <mat-error *ngIf="emailControl.hasError('required')">Email address is <strong>required</strong></mat-error>
        <mat-error *ngIf="emailControl.hasError('restful')">{{emailControl.getError('restful')}}
        </mat-error>
      </mat-form-field>
    </div>
    <mat-form-field class="full-width">
      <input matInput placeholder="Username" formControlName="username">
      <mat-error *ngIf="registerForm.get('username').hasError('required')">Username is <strong>required</strong>
      </mat-error>
      <mat-error *ngIf="registerForm.get('username').hasError('restful')">
        {{registerForm.get('username').getError('restful')}}
      </mat-error>
    </mat-form-field>
    <mat-form-field class="full-width">
      <input matInput placeholder="Password" formControlName="password"
             [type]="visible ? 'text': 'password'">
      <button type="button" mat-icon-button matSuffix (click)="visible = !visible">
        <mat-icon>visibility_{{visible ? 'off': ''}}</mat-icon>
      </button>
      <mat-error>Password is <strong>required</strong></mat-error>
    </mat-form-field>
    <div class="display-flex justify-content-space-between">
      <span class="flex-grow-1"></span>
      <button mat-button (click)="goLogin()" color="accent" type="button">I'm ready an account</button>
      <button mat-raised-button [disabled]="!registerForm.valid" color="primary">Create</button>
    </div>
  </mat-card>
</form>
